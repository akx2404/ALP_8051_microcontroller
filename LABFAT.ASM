ORG 0000H
MOV DPTR, #DATATOSEND
MOV TMOD, #00100000B
MOV TH1, #-3
MOV SCON, #50H
SETB TR1
MOV R1,#10

AGAIN:CLR A
MOVC A,@A+DPTR
MOV SBUF,A
HERE: JNB TI,HERE
CLR TI
INC DPTR
DJNZ R1,AGAIN

NOW:  SETB P2.0
MOV A, P2            
ACALL SEND      
ACALL GET        
MOV P1, A         
SJMP NOW 

SEND: MOV SBUF, A          
XX:  JNB TI, XX 
CLR TI
RET 

GET: JNB RI, GET
MOV A, SBUF
CLR RI 
RET

DATATOSEND: DB 'YES WE CAN'
END